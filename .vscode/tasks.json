{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Clean Dir",
      "type": "shell",
      "command": "bash",
      "args": [
        "-lc",
        "rm -rf '${workspaceFolder}/build_arm32/armhf-Debug' '${workspaceFolder}/install/armhf-Debug'"
      ],
      "problemMatcher": []
    },
    {
      "label": "Configure",
      "type": "shell",
      "command": "bash",
      "args": [
        "-lc",
        "cmake --preset armhf-Debug"
      ],
      "problemMatcher": []
    },
    {
      "label": "Build",
      "type": "shell",
      "command": "bash",
      "args": [
        "-lc",
        "cmake --build --preset armhf-Debug"
      ],
      "problemMatcher": []
    },
    {
      "label": "Deploy",
      "type": "shell",
      "command": "bash",
      "args": [
        "-lc",
        "rsync -avz --delete ${workspaceFolder}/build_arm32/armhf-Debug/bin/ root@192.168.5.75:/root/srv/exams/ && rsync -avz --delete ${workspaceFolder}/build_arm32/armhf-Debug/lib/ root@192.168.5.75:/root/srv/lib/"
      ],
      "problemMatcher": []
    },
    {
      "label": "Start gdbserver",
      "type": "shell",
      "command": "bash",
      "args": [
        "-lc",
        "ssh root@192.168.5.75 \"set -e; export LD_LIBRARY_PATH=/root/srv/exams:$LD_LIBRARY_PATH; killall extsrv 2>/dev/null || true; chmod +x /root/srv/exams/extsrv; exec gdbserver :1234 /root/srv/exams/extsrv\""
      ],
      "problemMatcher": []
    },
    {
      "label": "Start gdbserver & Exit",
      "type": "shell",
      "command": "bash",
      "args": [
        "-lc",
        "ssh root@192.168.5.75 \"set -e; export LD_LIBRARY_PATH=/root/srv/exams:$LD_LIBRARY_PATH; killall extsrv 2>/dev/null || true; chmod +x /root/srv/exams/extsrv; nohup gdbserver :1234 /root/srv/exams/extsrv >/root/srv/log/extsrv.log 2>&1 & sleep 1\""
      ],
      "problemMatcher": []
    },
    {
      "label": "Build & Deploy",
      "dependsOn": [
        "Configure",
        "Build",
        "Deploy"
      ],
      "dependsOrder": "sequence",
      "problemMatcher": []
    },
    {
      "label": "Clean Rebuild & Deploy",
      "dependsOn": [
        "Clean Dir",
        "Build & Deploy"
      ],
      "dependsOrder": "sequence",
      "problemMatcher": []
    },
    {
      "label": "Build, Deploy & Start",
      "dependsOn": [
        "Build & Deploy",
        "Start gdbserver"
      ],
      "dependsOrder": "sequence",
      "problemMatcher": []
    },
    {
      "label": "Build, Deploy, Start & Exit",
      "dependsOn": [
        "Build & Deploy",
        "Start gdbserver & Exit"
      ],
      "dependsOrder": "sequence",
      "problemMatcher": []
    }
  ]
}